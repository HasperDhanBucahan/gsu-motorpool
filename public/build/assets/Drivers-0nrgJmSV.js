import{r as n,S as M,j as e,a as T,f as $}from"./app-CM_53ag-.js";import{A as z,T as N}from"./AuthenticatedLayout-D4R4wwZx.js";import{U as c}from"./user-Bqgk2e5v.js";import{C as P}from"./check-B-tBOnZh.js";import{c as F}from"./createLucideIcon-mPmu35-0.js";import{S as L}from"./square-pen-4g39sSM7.js";import{F as O}from"./file-text-BuT2rTD0.js";import{P as f}from"./plus-D_n6UFi2.js";import{X as U}from"./x-C1RpThLZ.js";import"./Dropdown-NYFviwhB.js";import"./transition-CF6lRaLe.js";import"./portal-N1CzU3lS.js";/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],v=F("phone",q);function Z({auth:y,drivers:a=[]}){const[w,o]=n.useState(!1),[t,m]=n.useState(null),[g,x]=n.useState(null),[h,D]=n.useState(null),{data:r,setData:i,post:C,put:k,reset:u,errors:l,processing:b}=M({name:"",contact_number:"",description:""});n.useEffect(()=>{t?i({name:t.name,contact_number:t.contact_number,description:t.description||""}):u()},[t]);const S=s=>{s.preventDefault(),t?k(`/assignment/drivers/${t.id}`,{onSuccess:()=>{d()}}):C("/assignment/drivers",{onSuccess:()=>{d()}})},A=s=>{m(s),o(!0)},_=s=>{$.delete(`/assignment/drivers/${s}`,{onSuccess:()=>{x(null)}})},p=()=>{m(null),u(),o(!0)},d=()=>{o(!1),m(null),u()},E=(s,j=60)=>s?s.length<=j?s:s.substring(0,j)+"...":"";return e.jsxs(z,{user:y.user,header:e.jsxs("div",{className:"flex justify-between items-center gap-4",children:[e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Driver Management"}),e.jsxs("button",{onClick:p,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(f,{className:"w-5 h-5"}),"Add New Driver"]})]}),children:[e.jsx(T,{title:"Drivers Management"}),e.jsx("div",{className:"py-2",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:e.jsx(c,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Drivers"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:a.length})]})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:e.jsx(P,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Available"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:a.filter(s=>s.status!=="busy").length||a.length})]})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-yellow-100 p-3 rounded-full",children:e.jsx(c,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"On Duty"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:a.filter(s=>s.status==="busy").length||0})]})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-purple-100 p-3 rounded-full",children:e.jsx(v,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"New This Month"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:"0"})]})]})})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:a.map(s=>e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:e.jsx(c,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>A(s),className:"px-3 py-2 bg-blue-50 text-blue-700 hover:bg-blue-100 rounded-lg transition-colors flex items-center gap-2",title:"Edit driver",children:e.jsx(L,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>x(s.id),className:"px-3 py-2 bg-red-50 text-red-700 hover:bg-red-100 rounded-lg transition-colors flex items-center gap-2",title:"Delete driver",children:e.jsx(N,{className:"w-4 h-4"})})]})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:s.name}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-3",children:[e.jsx(v,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:s.contact_number})]}),s.description&&e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex items-start gap-2 text-gray-600",children:[e.jsx(O,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm",children:h===s.id?s.description:E(s.description)}),s.description.length>60&&e.jsx("button",{onClick:()=>D(h===s.id?null:s.id),className:"text-blue-600 hover:text-blue-700 text-xs mt-1",children:h===s.id?"Show less":"Read more"})]})]})}),e.jsx("div",{className:"pt-4 border-t border-gray-100",children:e.jsx("div",{className:"flex items-center justify-between text-xs text-gray-500",children:e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full bg-green-100 text-green-700",children:"Active"})})})]})},s.id))}),a.length===0&&e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(c,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No drivers found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by adding your first driver"}),e.jsxs("button",{onClick:p,className:"inline-flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(f,{className:"w-5 h-5"}),"Add First Driver"]})]})}),w&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 sticky top-0 bg-white",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:t?"Edit Driver":"Add New Driver"}),e.jsx("button",{onClick:d,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(U,{className:"w-5 h-5 text-gray-500"})})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Driver Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:r.name,onChange:s=>i("name",s.target.value),className:`w-full px-3 py-2 border ${l.name?"border-red-300":"border-gray-300"} rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500`,placeholder:"Enter driver name"}),l.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.name})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Contact Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:r.contact_number,onChange:s=>i("contact_number",s.target.value),className:`w-full px-3 py-2 border ${l.contact_number?"border-red-300":"border-gray-300"} rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500`,placeholder:"Enter contact number"}),l.contact_number&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.contact_number})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:r.description,onChange:s=>i("description",s.target.value),className:`w-full px-3 py-2 border ${l.description?"border-red-300":"border-gray-300"} rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none`,placeholder:"Enter driver description (optional)",rows:"4",maxLength:"1000"}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsx("div",{children:l.description&&e.jsx("p",{className:"text-sm text-red-600",children:l.description})}),e.jsxs("p",{className:"text-xs text-gray-500",children:[r.description.length,"/1000 characters"]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:d,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:S,disabled:b||!r.name||!r.contact_number,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[b?"Saving...":t?"Update":"Add"," Driver"]})]})]})]})}),g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:e.jsx(N,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Driver"}),e.jsx("p",{className:"text-sm text-gray-500",children:"This action cannot be undone"})]})]}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this driver? All associated data will be permanently removed."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>x(null),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>_(g),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete Driver"})]})]})})]})})]})}export{Z as default};
