import{j as e,r as c,q as se,a as re,f as I}from"./app-CM_53ag-.js";import{A as ae}from"./AuthenticatedLayout-D4R4wwZx.js";import{L as P}from"./dialog-D3HxsCPS.js";import{C as te}from"./circle-check-big-CyQMP5RP.js";import{C as j}from"./circle-x-C_tTjCxK.js";import{X as ne}from"./x-C1RpThLZ.js";import{T as C}from"./triangle-alert-LBezGv4U.js";import{f as k}from"./format-zWY_uF1i.js";import{z as U}from"./transition-CF6lRaLe.js";import{R as le}from"./RequestDetailModal-d0WLdaZz.js";import{C as L,a as ie,U as de}from"./users-DYKfnPp_.js";import{C as D}from"./circle-alert-x6lWoPzX.js";import{c as ce}from"./createLucideIcon-mPmu35-0.js";import{S as oe}from"./search-C60bdz9-.js";import{F as me}from"./file-text-BuT2rTD0.js";import{M as xe}from"./map-pin-CuCzhjHC.js";import{C as he}from"./car-Cbx68Keb.js";import{U as pe}from"./user-Bqgk2e5v.js";import{E as ge}from"./eye-CaPjzHpH.js";import"./Dropdown-NYFviwhB.js";import"./portal-N1CzU3lS.js";/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],h=ce("circle-check",ue);function fe({isOpen:S,closeModal:p,request:t,action:v,declineReason:b,approvalAdmin:g,onConfirm:A,processing:a,previewUrl:T}){var o,y,u,w,m,r;if(!t)return null;const x=l=>{try{return k(new Date(l),"MMMM d, yyyy")}catch{return l}},z=l=>{try{return k(new Date(l),"MMMM d, yyyy h:mm a")}catch{return l}},n=v==="approve",i=n?"Approve":"Decline",d=n?te:j;return e.jsx(U,{appear:!0,show:S,as:c.Fragment,children:e.jsxs(P,{as:"div",className:"relative z-50",onClose:p,children:[e.jsx(U.Child,{as:c.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/25"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:e.jsxs(P.Panel,{className:"w-full max-w-5xl transform overflow-hidden rounded-lg bg-white shadow-xl transition-all",children:[e.jsxs(P.Title,{as:"div",className:`flex items-center justify-between border-b p-4 ${n?"bg-green-50":"bg-red-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{className:`w-5 h-5 ${n?"text-green-600":"text-red-600"}`}),e.jsxs("h3",{className:"text-lg font-medium",children:[i," Request Preview"]})]}),e.jsx("button",{onClick:p,className:"text-gray-400 hover:text-gray-500",disabled:a,children:e.jsx(ne,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:`border-2 rounded-lg p-6 mb-6 ${n?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:`inline-flex items-center justify-center w-16 h-16 rounded-full ${n?"bg-green-100":"bg-red-100"} mb-3`,children:e.jsx(d,{className:`w-8 h-8 ${n?"text-green-600":"text-red-600"}`})}),e.jsxs("h2",{className:`text-2xl font-bold ${n?"text-green-900":"text-red-900"}`,children:["REQUEST WILL BE ",i.toUpperCase(),"D"]})]}),!n&&b&&e.jsx("div",{className:"bg-white border border-red-200 rounded-md p-4",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(C,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-red-900 mb-1",children:"Reason for Decline:"}),e.jsx("p",{className:"text-red-800",children:b})]})]})})]}),e.jsxs("div",{className:"border rounded-lg p-6 bg-white shadow-sm mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4 border-b pb-2",children:"Request Details"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"REQUESTOR INFORMATION"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Name:"}),e.jsx("p",{className:"font-medium",children:(o=t.user)==null?void 0:o.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Department:"}),e.jsx("p",{className:"font-medium",children:((y=t.user)==null?void 0:y.department)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Date Requested:"}),e.jsx("p",{className:"font-medium",children:z(t.created_at)})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"TRAVEL SCHEDULE"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Date of Travel:"}),e.jsx("p",{className:"font-medium",children:x(t.date_of_travel)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Duration:"}),e.jsxs("p",{className:"font-medium",children:[t.days_of_travel," day(s)"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Time:"}),e.jsx("p",{className:"font-medium",children:t.time_of_travel})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"TRIP DETAILS"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Destination:"}),e.jsx("p",{className:"font-medium",children:t.destination})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Purpose:"}),e.jsx("p",{className:"font-medium",children:t.purpose})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Authorized Passengers:"}),e.jsx("p",{className:"font-medium",children:t.authorized_passengers})]})]})]})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-900 mb-3",children:"ASSIGNED RESOURCES"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-blue-700",children:"Vehicle:"}),e.jsx("p",{className:"font-medium text-blue-900",children:((u=t.vehicle)==null?void 0:u.model)||"Not assigned"}),e.jsx("p",{className:"text-sm text-blue-700",children:((w=t.vehicle)==null?void 0:w.plate_number)||""})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-blue-700",children:"Driver:"}),e.jsx("p",{className:"font-medium text-blue-900",children:((m=t.driver)==null?void 0:m.name)||"Not assigned"}),e.jsx("p",{className:"text-sm text-blue-700",children:((r=t.driver)==null?void 0:r.contact_number)||""})]})]})]})]}),e.jsxs("div",{className:"border rounded-lg p-6 bg-gray-50 mb-6",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"ACTION INFORMATION"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Action:"}),e.jsx("p",{className:`font-medium ${n?"text-green-600":"text-red-600"}`,children:i.toUpperCase()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Processed By:"}),e.jsx("p",{className:"font-medium",children:g==null?void 0:g.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Date & Time:"}),e.jsx("p",{className:"font-medium",children:k(new Date,"MMMM d, yyyy h:mm a")})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"PDF Preview - This document will be sent to the client:"}),e.jsx("div",{className:"border rounded-lg overflow-hidden",style:{height:"500px"},children:e.jsx("iframe",{src:T,className:"w-full h-full",title:"Approval/Decline PDF Preview"})})]}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(C,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm text-amber-800",children:n?e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"After approval:"})," This request will be sent to the Client and Ticket Admin for trip ticket preparation. This action cannot be undone."]}):e.jsxs(e.Fragment,{children:[e.jsx("strong",{children:"After decline:"})," The client will be notified with the decline reason. The assigned resources will be released. This action cannot be undone."]})})})]})}),e.jsxs("div",{className:"flex justify-between items-center gap-3 pt-4 border-t",children:[e.jsx("button",{type:"button",onClick:p,className:"px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 border rounded-md",disabled:a,children:"Cancel"}),e.jsxs("button",{onClick:A,className:`flex items-center gap-2 px-6 py-2 text-sm font-medium text-white rounded-md disabled:opacity-50 ${n?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"}`,disabled:a,children:[e.jsx(d,{className:"w-4 h-4"}),a?"Processing...":`Confirm ${i}`]})]})]})]})})})]})})}function Ue({auth:S,pendingRequests:p,forwardedRequests:t,approvedRequests:v,declinedRequests:b,completedRequests:g}){const{auth:A}=se().props,[a,T]=c.useState("pending"),[x,z]=c.useState(""),[n,i]=c.useState(null),[d,o]=c.useState(""),[y,u]=c.useState(!1),[w,m]=c.useState(!1),[r,l]=c.useState(null),[F,N]=c.useState(null),[O,M]=c.useState(""),[B,R]=c.useState(!1),V=[{id:"pending",label:"Pending Approval",count:p.length,color:"blue",icon:L},{id:"forwarded",label:"Forwarded for Decline",count:t.length,color:"orange",icon:D},{id:"approved",label:"Approved",count:v.length,color:"green",icon:h},{id:"declined",label:"Declined",count:b.length,color:"red",icon:j},{id:"completed",label:"Completed",count:g.length,color:"purple",icon:h}],E=(()=>{switch(a){case"pending":return p;case"forwarded":return t;case"approved":return v;case"declined":return b;case"completed":return g;default:return[]}})(),_=E.filter(s=>s.destination.toLowerCase().includes(x.toLowerCase())||s.purpose.toLowerCase().includes(x.toLowerCase())||s.user.name.toLowerCase().includes(x.toLowerCase())),Q=s=>new Date(s).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),X=s=>({blue:"border-blue-500 text-blue-600 bg-blue-50",orange:"border-orange-500 text-orange-600 bg-orange-50",green:"border-green-500 text-green-600 bg-green-50",red:"border-red-500 text-red-600 bg-red-50",purple:"border-purple-500 text-purple-600 bg-purple-50"})[s]||"border-gray-500 text-gray-600",G=s=>({blue:"text-blue-600 hover:bg-blue-50",orange:"text-orange-600 hover:bg-orange-50",green:"text-green-600 hover:bg-green-50",red:"text-red-600 hover:bg-red-50",purple:"text-purple-600 hover:bg-purple-50"})[s]||"text-gray-600 hover:bg-gray-50",H=s=>{l(s),R(!0)},W=()=>{R(!1),setTimeout(()=>l(null),300)},Y=s=>{if(s.forwarded_for_decline){alert("This request was forwarded by the assignment admin for declining due to resource unavailability. Please decline this request.");return}l(s),N("approve");const f=route("admin.requests.preview-approval",{id:s.id,action:"approve"});M(f),m(!0)},J=()=>{r&&(i(r.id),I.post(route("admin.requests.approve",r.id),{},{preserveScroll:!0,onSuccess:()=>{m(!1),i(null),l(null),N(null)},onError:s=>{console.error("Approval error:",s),alert(s.error||"Failed to approve request"),i(null)},onFinish:()=>{i(null)}}))},$=s=>{l(s),s.forwarded_for_decline&&s.forwarded_decline_reason&&o(s.forwarded_decline_reason),u(!0)},K=()=>{if(!r){alert("No request selected.");return}if(!d.trim()){alert("Please provide a reason for declining.");return}u(!1),N("decline");const s=route("admin.requests.preview-approval",{id:r.id,action:"decline",decline_reason:encodeURIComponent(d)});M(s),m(!0)},Z=()=>{r&&(i(r.id),I.post(route("admin.requests.decline",r.id),{decline_reason:d.trim()},{preserveScroll:!0,onSuccess:()=>{m(!1),i(null),l(null),N(null),o("")},onError:s=>{console.error("Decline error:",s),s.decline_reason?alert("Decline reason error: "+s.decline_reason):s.error?alert("Error: "+s.error):alert("Failed to decline request. Please try again."),i(null)},onFinish:()=>{i(null)}}))},q=()=>{u(!1),o(""),l(null)},ee=()=>{m(!1),l(null),N(null),o(""),M("")};return e.jsxs(ae,{user:S.user,header:e.jsx("div",{className:"flex justify-between items-center gap-4",children:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Request Management"})}),children:[e.jsx(re,{title:"Request Management"}),e.jsx("div",{className:"py-2",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:[e.jsx("div",{className:"border-b border-gray-200 overflow-x-auto",children:e.jsx("nav",{className:"-mb-px flex",children:V.map(s=>{const f=s.icon;return e.jsxs("button",{onClick:()=>T(s.id),className:`py-4 px-6 text-sm font-medium whitespace-nowrap flex items-center gap-2 transition-all ${a===s.id?`border-b-2 ${X(s.color)}`:`text-gray-500 hover:text-gray-700 ${G(s.color)}`}`,children:[e.jsx(f,{size:16}),s.label," (",s.count,")"]},s.id)})})}),e.jsx("div",{className:"p-6 bg-gray-50 border-b border-gray-200",children:e.jsx("div",{className:"flex flex-wrap gap-4 items-center",children:e.jsx("div",{className:"flex-1 min-w-64",children:e.jsxs("div",{className:"relative",children:[e.jsx(oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),e.jsx("input",{type:"text",placeholder:"Search by destination, purpose, or requester...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:x,onChange:s=>z(s.target.value)})]})})})}),e.jsx("div",{className:"divide-y divide-gray-200",children:_.length===0?e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(me,{size:48,className:"mx-auto"})}),e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:["No ",a," requests found"]}),e.jsx("p",{className:"text-gray-600",children:x?"No requests match your search criteria.":`There are no ${a} requests at the moment.`})]}):_.map(s=>e.jsx("div",{className:`p-6 hover:bg-gray-50 transition ${s.forwarded_for_decline?"bg-orange-50":""}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Request #",s.id," - ",s.user.name]}),a==="pending"&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[e.jsx(L,{size:12,className:"mr-1"}),"Pending Approval"]}),a==="forwarded"&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:[e.jsx(D,{size:12,className:"mr-1"}),"Must Decline"]}),a==="approved"&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(h,{size:12,className:"mr-1"}),"Approved"]}),a==="declined"&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(j,{size:12,className:"mr-1"}),"Declined"]}),a==="completed"&&e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:[e.jsx(h,{size:12,className:"mr-1"}),"Completed"]})]}),(s.user.department||s.user.position)&&e.jsx("div",{className:"text-sm text-gray-600 mb-3",children:[s.user.department,s.user.position].filter(Boolean).join(" - ")}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{size:16,className:"text-gray-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Destination:"}),e.jsx("span",{className:"ml-2 text-gray-700",children:s.destination})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{size:16,className:"text-gray-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Travel Date:"}),e.jsx("span",{className:"ml-2 text-gray-700",children:Q(s.start_datetime)})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(L,{size:16,className:"text-gray-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Duration:"}),e.jsxs("span",{className:"ml-2 text-gray-700",children:[s.days_of_travel," day(s)"]})]})]}),s.vehicle&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{size:16,className:"text-blue-600"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Vehicle:"}),e.jsxs("span",{className:"ml-2 text-gray-700",children:[s.vehicle.description," - ",s.vehicle.plate_number]})]})]}),s.driver&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{size:16,className:"text-green-600"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Driver:"}),e.jsx("span",{className:"ml-2 text-gray-700",children:s.driver.name})]})]}),s.authorized_passengers&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{size:16,className:"text-gray-500"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Passengers:"}),e.jsx("span",{className:"ml-2 text-gray-700",children:s.authorized_passengers})]})]})]}),s.purpose&&e.jsxs("div",{className:"mb-4",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Purpose:"}),e.jsx("p",{className:"text-gray-600 mt-1 leading-relaxed",children:s.purpose})]}),s.forwarded_for_decline===!0&&s.forwarded_decline_reason&&e.jsxs("div",{className:"mb-4 p-3 bg-orange-100 border border-orange-200 rounded-md",children:[e.jsx("span",{className:"font-medium text-orange-900 text-sm",children:"Assignment Admin's Reason:"}),e.jsxs("p",{className:"text-orange-800 text-sm mt-1 italic",children:['"',s.forwarded_decline_reason,'"']})]}),a==="declined"&&s.decline_reason&&e.jsx("div",{className:"mb-4 p-3 bg-red-100 border-l-4 border-red-400 rounded-md",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(C,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-red-900 text-sm",children:"Decline Reason:"}),e.jsx("p",{className:"text-red-800 text-sm mt-1",children:s.decline_reason})]})]})}),e.jsxs("div",{className:"text-sm text-gray-500",children:[a==="pending"&&s.created_at&&`Submitted on ${new Date(s.created_at).toLocaleDateString()}`,a==="forwarded"&&s.updated_at&&`Forwarded on ${new Date(s.updated_at).toLocaleDateString()}`,a==="approved"&&s.approved_at&&`Approved on ${new Date(s.approved_at).toLocaleDateString()}`,a==="declined"&&s.declined_at&&`Declined on ${new Date(s.declined_at).toLocaleDateString()}`,a==="completed"&&s.end_datetime&&`Completed on ${new Date(s.end_datetime).toLocaleDateString()}`]})]}),e.jsxs("div",{className:"ml-6 flex flex-col gap-2",children:[e.jsxs("button",{onClick:()=>H(s),className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 transition text-sm flex items-center gap-2 whitespace-nowrap",children:[e.jsx(ge,{size:14}),"View Details"]}),a==="pending"&&s.forwarded_for_decline!==!0&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>Y(s),disabled:n===s.id,className:"bg-green-600 hover:bg-green-700 disabled:bg-green-300 disabled:cursor-not-allowed text-white px-6 py-2 rounded-md transition font-medium flex items-center gap-2",children:[e.jsx(h,{size:16}),"Approve"]}),e.jsxs("button",{onClick:()=>$(s),disabled:n===s.id,className:"bg-red-600 hover:bg-red-700 disabled:bg-red-300 disabled:cursor-not-allowed text-white px-6 py-2 rounded-md transition font-medium flex items-center gap-2",children:[e.jsx(j,{size:16}),"Decline"]})]}),(a==="forwarded"||a==="pending"&&s.forwarded_for_decline===!0)&&e.jsxs("button",{onClick:()=>$(s),disabled:n===s.id,className:"bg-red-600 hover:bg-red-700 disabled:bg-red-300 disabled:cursor-not-allowed text-white px-6 py-2 rounded-md transition font-medium flex items-center gap-2",children:[e.jsx(j,{size:16}),"Decline Request"]}),a==="approved"&&e.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[e.jsx(h,{size:16}),e.jsx("span",{className:"text-sm font-medium",children:"Approved"})]}),a==="declined"&&e.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[e.jsx(j,{size:16}),e.jsx("span",{className:"text-sm font-medium",children:"Declined"})]}),a==="completed"&&e.jsxs("div",{className:"flex items-center gap-2 text-purple-600",children:[e.jsx(h,{size:16}),e.jsx("span",{className:"text-sm font-medium",children:"Completed"})]})]})]})},s.id))}),_.length>0&&e.jsx("div",{className:"p-6 bg-gray-50 border-t border-gray-200",children:e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",_.length," of ",E.length," ",a," requests"]})})]})})}),y&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-[500px] shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r!=null&&r.forwarded_for_decline?e.jsx(D,{className:"w-6 h-6 text-orange-600"}):e.jsx(C,{className:"w-6 h-6 text-red-600"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:r!=null&&r.forwarded_for_decline?"Decline Forwarded Request":"Decline Request"})]}),(r==null?void 0:r.forwarded_for_decline)===!0&&e.jsx("div",{className:"mb-4 p-4 bg-orange-50 border-2 border-orange-300 rounded-md",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(D,{size:18,className:"text-orange-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-semibold text-orange-900",children:"No Resources Available"}),e.jsx("p",{className:"text-xs text-orange-700 mt-1",children:"The assignment admin forwarded this request because no vehicles or drivers were available for the requested time period."}),r.forwarded_decline_reason&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-orange-200",children:[e.jsx("p",{className:"text-xs font-medium text-orange-800",children:"Assignment Admin's Reason:"}),e.jsxs("p",{className:"text-sm text-orange-900 mt-1 italic",children:['"',r.forwarded_decline_reason,'"']})]})]})]})}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[r!=null&&r.forwarded_for_decline?"You can edit the decline reason below before confirming:":"Please provide a reason for declining this request:",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:d,onChange:s=>o(s.target.value),placeholder:"Reason for declining",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-red-500 resize-none",rows:"4",maxLength:"500",required:!0}),e.jsxs("div",{className:"text-right text-xs text-gray-500 mt-1",children:[d.length,"/500 characters"]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[e.jsx("button",{onClick:q,className:"px-4 py-2 bg-gray-300 hover:bg-gray-400 text-gray-800 text-sm font-medium rounded-md transition-colors",children:"Cancel"}),e.jsx("button",{onClick:K,disabled:!d.trim()||d.trim().length<5,className:"px-4 py-2 bg-red-500 hover:bg-red-600 disabled:bg-red-300 disabled:cursor-not-allowed text-white text-sm font-medium rounded-md transition-colors",children:r!=null&&r.forwarded_for_decline?"Confirm Decline":"Continue to Preview"})]})]})})}),e.jsx(fe,{isOpen:w,closeModal:ee,request:r,action:F,declineReason:d,approvalAdmin:A.user,onConfirm:F==="approve"?J:Z,processing:n===(r==null?void 0:r.id),previewUrl:O}),e.jsx(le,{isOpen:B,onClose:W,request:r})]})}export{Ue as default};
