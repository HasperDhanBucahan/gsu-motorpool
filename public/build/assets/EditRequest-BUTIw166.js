import{r as j,S as b,j as e,a as N,f as m}from"./app-CM_53ag-.js";import{A as w}from"./AuthenticatedLayout-D4R4wwZx.js";import{I as i}from"./InputLabel-BEtyGDv8.js";import{T as l,I as d}from"./TextInput-B5UKG27d.js";import{A as q}from"./AuthorizedPassengersInput-Cxb9SplB.js";import"./Dropdown-NYFviwhB.js";import"./transition-CF6lRaLe.js";import"./portal-N1CzU3lS.js";import"./createLucideIcon-mPmu35-0.js";import"./plus-D_n6UFi2.js";import"./user-Bqgk2e5v.js";import"./x-C1RpThLZ.js";function M({auth:f,request:t}){const[p,x]=j.useState(t.authorized_passengers?t.authorized_passengers.split(", ").filter(a=>a.trim()):[]),{data:r,setData:s,patch:_,processing:n,errors:o}=b({destination:t.destination||"",purpose:t.purpose||"",authorized_passengers:t.authorized_passengers||"",date_of_travel:t.date_of_travel?t.date_of_travel.substring(0,10):"",days_of_travel:t.days_of_travel||"",half_day_period:t.half_day_period||"",time_of_travel:t.time_of_travel||""}),g=a=>{x(a),s("authorized_passengers",a.join(", "))},u=()=>{const a=parseFloat(r.days_of_travel);return!isNaN(a)&&a%1!==0},v=a=>{const c=a.target.value;s("days_of_travel",c);const h=parseFloat(c);!isNaN(h)&&h%1===0&&s("half_day_period","")},y=a=>{if(a.preventDefault(),u()&&!r.half_day_period){alert("Please select morning or afternoon for half-day requests.");return}_(`/requests/${t.id}`,{onSuccess:()=>m.visit(route("requests.index"))})};return e.jsxs(w,{user:f.user,header:e.jsx("h2",{className:"text-xl font-semibold leading-tight text-gray-800",children:"Edit Request"}),children:[e.jsx(N,{title:"Edit Request"}),e.jsx("div",{className:"flex items-center justify-center min-h-[calc(100vh-80px)] bg-gray-100 px-4 py-12",children:e.jsxs("div",{className:"w-full max-w-3xl bg-white shadow rounded-xl p-6 overflow-y-auto max-h-[90vh]",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6 text-center text-gray-800",children:"Edit Request for Use of Vehicle"}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"destination",required:!0,children:"Destination"}),e.jsx(l,{id:"destination",value:r.destination,onChange:a=>s("destination",a.target.value),className:"mt-1 block w-full",required:!0}),e.jsx(d,{message:o.destination})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"purpose",required:!0,children:"Purpose"}),e.jsx("textarea",{id:"purpose",value:r.purpose,onChange:a=>s("purpose",a.target.value),className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",rows:"3",required:!0}),e.jsx(d,{message:o.purpose})]}),e.jsx(q,{passengers:p,onChange:g,error:o.authorized_passengers}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"date_of_travel",required:!0,children:"Date of Travel"}),e.jsx(l,{id:"date_of_travel",type:"date",value:r.date_of_travel,onChange:a=>s("date_of_travel",a.target.value),className:"mt-1 block w-full",min:new Date().toISOString().split("T")[0],required:!0}),e.jsx(d,{message:o.date_of_travel})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"days_of_travel",required:!0,children:"Days of Travel"}),e.jsx(l,{id:"days_of_travel",type:"number",step:"0.5",value:r.days_of_travel,onChange:v,className:"mt-1 block w-full",min:"0.5",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Enter 0.5 for half-day, 1 for full day, 1.5 for day and half, etc."}),e.jsx(d,{message:o.days_of_travel})]}),u()&&e.jsxs("div",{children:[e.jsx(i,{htmlFor:"half_day_period",required:!0,children:"Half-Day Period"}),e.jsxs("select",{id:"half_day_period",value:r.half_day_period,onChange:a=>s("half_day_period",a.target.value),className:"mt-1 block w-full border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",required:!0,children:[e.jsx("option",{value:"",children:"Select Period"}),e.jsx("option",{value:"morning",children:"Morning (until 12 PM)"}),e.jsx("option",{value:"afternoon",children:"Afternoon (until 5 PM)"})]}),e.jsx(d,{message:o.half_day_period})]})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"time_of_travel",required:!0,children:"Time of Travel"}),e.jsx(l,{id:"time_of_travel",type:"time",value:r.time_of_travel,onChange:a=>s("time_of_travel",a.target.value),className:"mt-1 block w-full",required:!0}),e.jsx(d,{message:o.time_of_travel})]}),e.jsxs("div",{className:"flex justify-end gap-4 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>m.visit(route("requests.index")),className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",disabled:n,children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",disabled:n,children:n?"Updating...":"Update Request"})]})]})]})})]})}export{M as default};
