import{r as m,j as e,a as f}from"./app-CM_53ag-.js";import{A as b}from"./AuthenticatedLayout-D4R4wwZx.js";import{F as l}from"./file-text-BuT2rTD0.js";import{E as D}from"./eye-CaPjzHpH.js";import{D as T}from"./download-BNlgXHtj.js";import{P as k}from"./printer-CNB5qQX7.js";import{f as h}from"./format-zWY_uF1i.js";import"./Dropdown-NYFviwhB.js";import"./transition-CF6lRaLe.js";import"./portal-N1CzU3lS.js";import"./createLucideIcon-mPmu35-0.js";function B({auth:p,tickets:n}){const[r,u]=m.useState(""),[d,g]=m.useState("all"),j=s=>h(new Date(s),"MMMM d, yyyy"),w=s=>h(new Date(`2000-01-01 ${s}`),"h:mm a"),o=[...new Set(n.map(s=>{var t;return(t=s.driver)==null?void 0:t.name}).filter(Boolean))],c=n.filter(s=>{var a,x;const t=s.user.name.toLowerCase().includes(r.toLowerCase())||((a=s.driver)==null?void 0:a.name.toLowerCase().includes(r.toLowerCase()))||s.trip_ticket_number.toString().includes(r)||s.destination.toLowerCase().includes(r.toLowerCase()),i=d==="all"||((x=s.driver)==null?void 0:x.name)===d;return t&&i}),N=s=>{window.open(route("tickets.preview",s),"_blank")},v=s=>{window.location.href=route("tickets.download",s)},y=s=>{const t=window.open(route("tickets.preview",s),"_blank");t.addEventListener("load",()=>{t.print()})};return e.jsxs(b,{user:p.user,header:e.jsx("div",{className:"flex justify-between items-center gap-4",children:e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Driver's Tickets"})}),children:[e.jsx(f,{title:"Driver's Tickets"}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-6 bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),e.jsx("input",{type:"text",placeholder:"Search by requestor, driver, ticket number, or destination...",value:r,onChange:s=>u(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Driver"}),e.jsxs("select",{value:d,onChange:s=>g(s.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Drivers"}),o.map(s=>e.jsx("option",{value:s,children:s},s))]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(l,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Tickets"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(l,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Drivers"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:e.jsx(l,{className:"w-6 h-6 text-purple-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Filtered Results"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.length})]})]})})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50 text-left",children:[e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Trip Ticket #"}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Requestor"}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Driver"}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vehicle"}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Travel Date & Time"}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Destination"}),e.jsx("th",{className:"px-6 py-3 text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:c.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-8 text-center text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(l,{className:"w-12 h-12 mb-2 text-gray-400"}),e.jsx("p",{children:"No tickets found matching your criteria"})]})})}):c.map(s=>{var t,i,a;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-blue-600",children:["#",s.trip_ticket_number]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.user.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:((t=s.driver)==null?void 0:t.name)||"Not assigned"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.jsx("div",{children:((i=s.vehicle)==null?void 0:i.model)||"N/A"}),e.jsx("div",{className:"text-xs text-gray-500",children:((a=s.vehicle)==null?void 0:a.plate_number)||"N/A"})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.jsx("div",{children:j(s.date_of_travel)}),e.jsx("div",{className:"text-xs text-gray-500",children:w(s.time_of_travel)})]}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 max-w-xs truncate",children:s.destination}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>N(s.id),className:"p-2 bg-blue-500 hover:bg-blue-600 text-white rounded transition-colors",title:"Preview Ticket",children:e.jsx(D,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>v(s.id),className:"p-2 bg-green-500 hover:bg-green-600 text-white rounded transition-colors",title:"Download Ticket",children:e.jsx(T,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>y(s.id),className:"p-2 bg-purple-500 hover:bg-purple-600 text-white rounded transition-colors",title:"Print Ticket",children:e.jsx(k,{className:"w-4 h-4"})})]})})]},s.id)})})]})})]})]})}export{B as default};
