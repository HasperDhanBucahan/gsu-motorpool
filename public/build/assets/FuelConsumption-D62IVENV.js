import{r as i,j as e,a as T,f as P}from"./app-CM_53ag-.js";import{A as D}from"./AuthenticatedLayout-D4R4wwZx.js";import{c as Y}from"./createLucideIcon-mPmu35-0.js";import{C as I}from"./chevron-left-DJaHbXH1.js";import{S as E,P as L}from"./save-BmrvCk2G.js";import{X as _}from"./x-C1RpThLZ.js";import{D as V}from"./download-BNlgXHtj.js";import"./Dropdown-NYFviwhB.js";import"./transition-CF6lRaLe.js";import"./portal-N1CzU3lS.js";/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["line",{x1:"3",x2:"15",y1:"22",y2:"22",key:"xegly4"}],["line",{x1:"4",x2:"14",y1:"9",y2:"9",key:"xcnuvu"}],["path",{d:"M14 22V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v18",key:"16j0yd"}],["path",{d:"M14 13h2a2 2 0 0 1 2 2v2a2 2 0 0 0 2 2a2 2 0 0 0 2-2V9.83a2 2 0 0 0-.59-1.42L18 5",key:"7cu91f"}]],x=Y("fuel",J);function Q({vehicles:A,fuelData:$}){const[a,g]=i.useState(null),[r,j]=i.useState(new Date().getFullYear()),[N,b]=i.useState(null),[d,c]=i.useState(""),[m,u]=i.useState(!1),[v,y]=i.useState(!1),h=[...A].sort((s,t)=>s.id-t.id),f=["January","February","March","April","May","June","July","August","September","October","November","December"],w=Array.from({length:10},(s,t)=>new Date().getFullYear()-t),p=(s,t,l)=>{const n=l+1,o=`${s}-${t}-${n}`;return $[o]||null},C=s=>{const t=p(a.id,r,s);b(s),c((t==null?void 0:t.liters)||"")},k=s=>{if(!d||parseFloat(d)<0){alert("Please enter a valid number of liters");return}u(!0),P.post(route("tickets.fuel-consumption.store"),{vehicle_id:a.id,year:r,month:s+1,liters:parseFloat(d)},{preserveScroll:!0,onSuccess:()=>{b(null),c(""),u(!1)},onError:t=>{alert(t.liters||"Failed to save fuel consumption"),u(!1)},onFinish:()=>{u(!1)}})},F=()=>{b(null),c("")},S=()=>{let s=0;return f.forEach((t,l)=>{const n=p(a.id,r,l);n&&(s+=parseFloat(n.liters))}),s.toFixed(2)},M=async()=>{y(!0);try{const s=document.createElement("form");s.method="POST",s.action=route("tickets.fuel-consumption.export"),s.style.display="none";const t=document.createElement("input");t.type="hidden",t.name="_token",t.value=document.querySelector('meta[name="csrf-token"]').content,s.appendChild(t);const l=document.createElement("input");l.type="hidden",l.name="year",l.value=r,s.appendChild(l),document.body.appendChild(s),s.submit(),document.body.removeChild(s),setTimeout(()=>{y(!1)},2e3)}catch(s){console.error("Export failed:",s),alert("Failed to export fuel consumption data"),y(!1)}};return e.jsxs(D,{header:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Vehicle Fuel Consumption"}),e.jsxs("button",{onClick:M,disabled:v,className:"inline-flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg shadow-sm disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[e.jsx(V,{className:"w-5 h-5 mr-2"}),v?"Exporting...":"Export to Excel"]})]}),children:[e.jsx(T,{title:"Fuel Consumption"}),e.jsx("div",{className:"lg:hidden p-4 sm:p-6",children:a?e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsxs("button",{onClick:()=>g(null),className:"mb-3 flex items-center text-blue-600 hover:text-blue-700 font-medium",children:[e.jsx(I,{className:"w-5 h-5 mr-1"}),"Back to Vehicles"]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:a.description}),e.jsx("p",{className:"text-sm text-gray-500",children:a.plate_number})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("select",{value:r,onChange:s=>j(parseInt(s.target.value)),className:"text-sm rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:w.map(s=>e.jsx("option",{value:s,children:s},s))})})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("h4",{className:"text-base font-semibold text-gray-900 mb-4",children:[r," Fuel Consumption (L)"]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Month"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Liters"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map((s,t)=>{const l=p(a.id,r,t),n=N===t;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:s}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-900",children:n?e.jsx("input",{type:"number",step:"0.01",min:"0",value:d,onChange:o=>c(o.target.value),className:"w-24 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm",placeholder:"0.00",autoFocus:!0}):e.jsx("span",{className:l?"font-semibold":"text-gray-400",children:l?`${parseFloat(l.liters).toFixed(2)} L`:"-"})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm",children:n?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>k(t),disabled:m,className:"inline-flex items-center px-2 py-1 bg-green-600 hover:bg-green-700 text-white text-xs font-medium rounded disabled:opacity-50",children:e.jsx(E,{className:"w-3 h-3"})}),e.jsx("button",{onClick:F,disabled:m,className:"inline-flex items-center px-2 py-1 bg-gray-500 hover:bg-gray-600 text-white text-xs font-medium rounded disabled:opacity-50",children:e.jsx(_,{className:"w-3 h-3"})})]}):e.jsxs("button",{onClick:()=>C(t),className:"inline-flex items-center px-2 py-1 bg-blue-600 hover:bg-blue-700 text-white text-xs font-medium rounded",children:[e.jsx(L,{className:"w-3 h-3 mr-1"}),l?"Edit":"Add"]})})]},s)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-gray-50 font-semibold",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:"Total"}),e.jsxs("td",{className:"px-4 py-3 text-sm text-gray-900",children:[S()," L"]}),e.jsx("td",{})]})})]})})]})]}):e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"p-4 sm:p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Select a Vehicle"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Click on a vehicle to manage its fuel consumption"})]}),e.jsx("div",{className:"divide-y divide-gray-200",children:h.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(x,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),e.jsx("p",{children:"No vehicles available"})]}):h.map(s=>e.jsxs("button",{onClick:()=>g(s),className:"w-full px-4 sm:px-6 py-4 flex items-center space-x-4 hover:bg-gray-50 transition-colors text-left",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(x,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-gray-900 truncate",children:s.description}),e.jsx("p",{className:"text-sm text-gray-500",children:s.plate_number}),e.jsxs("div",{className:"flex gap-4 mt-1",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:["Type: ",s.fuel_type||"N/A"]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Status:",e.jsx("span",{className:`ml-1 ${s.status==="available"?"text-green-600":"text-red-600"}`,children:s.status})]})]})]})]},s.id))})]})}),e.jsxs("div",{className:"hidden lg:flex h-[calc(100vh-theme(spacing.32))]",children:[e.jsx("div",{className:"w-[420px] flex-shrink-0 border-r border-gray-200 bg-white",children:e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"px-6 py-5 border-b border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Vehicles"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Select a vehicle to view fuel consumption"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto divide-y divide-gray-200",children:h.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(x,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),e.jsx("p",{children:"No vehicles available"})]}):h.map(s=>e.jsxs("button",{onClick:()=>g(s),className:`w-full px-6 py-5 flex items-center space-x-4 transition-colors text-left ${(a==null?void 0:a.id)===s.id?"bg-blue-50 border-l-4 border-blue-600":"hover:bg-gray-50"}`,children:[e.jsx("div",{className:`w-14 h-14 rounded-lg flex items-center justify-center flex-shrink-0 ${(a==null?void 0:a.id)===s.id?"bg-blue-600":"bg-blue-100"}`,children:e.jsx(x,{className:`w-7 h-7 ${(a==null?void 0:a.id)===s.id?"text-white":"text-blue-600"}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:`font-semibold text-base truncate ${(a==null?void 0:a.id)===s.id?"text-blue-900":"text-gray-900"}`,children:s.description}),e.jsx("p",{className:"text-sm text-gray-600 mt-0.5",children:s.plate_number}),e.jsxs("div",{className:"flex flex-col gap-1 mt-2",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:[e.jsx("span",{className:"font-medium",children:"Type:"})," ",s.fuel_type||"N/A"]}),e.jsxs("span",{className:"text-xs text-gray-500",children:[e.jsx("span",{className:"font-medium",children:"Status:"}),e.jsx("span",{className:`ml-1 font-semibold ${s.status==="available"?"text-green-600":"text-red-600"}`,children:s.status})]})]})]})]},s.id))})]})}),e.jsx("div",{className:"flex-1 min-w-0 bg-gray-50",children:a?e.jsxs("div",{className:"h-full flex flex-col bg-white",children:[e.jsx("div",{className:"px-8 py-6 border-b border-gray-200 bg-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:a.description}),e.jsx("p",{className:"text-base text-gray-600 mt-1",children:a.plate_number})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Year:"}),e.jsx("select",{value:r,onChange:s=>j(parseInt(s.target.value)),className:"rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 text-base py-2",children:w.map(s=>e.jsx("option",{value:s,children:s},s))})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-8 py-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-6",children:[r," Fuel Consumption (Liters)"]}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Month"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"No. of Liters Consumed"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map((s,t)=>{const l=p(a.id,r,t),n=N===t;return e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:s}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:n?e.jsx("input",{type:"number",step:"0.01",min:"0",value:d,onChange:o=>c(o.target.value),className:"w-40 rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"0.00",autoFocus:!0}):e.jsx("span",{className:l?"font-semibold text-base":"text-gray-400",children:l?`${parseFloat(l.liters).toFixed(2)} L`:"-"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:n?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>k(t),disabled:m,className:"inline-flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white text-sm font-medium rounded-md disabled:opacity-50 transition-colors",children:[e.jsx(E,{className:"w-4 h-4 mr-1.5"}),"Save"]}),e.jsxs("button",{onClick:F,disabled:m,className:"inline-flex items-center px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white text-sm font-medium rounded-md disabled:opacity-50 transition-colors",children:[e.jsx(_,{className:"w-4 h-4 mr-1.5"}),"Cancel"]})]}):e.jsxs("button",{onClick:()=>C(t),className:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-md transition-colors",children:[e.jsx(L,{className:"w-4 h-4 mr-1.5"}),l?"Update":"Add"]})})]},s)})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-blue-50 font-semibold border-t-2 border-blue-200",children:[e.jsx("td",{className:"px-6 py-4 text-base text-gray-900",children:"Total"}),e.jsxs("td",{className:"px-6 py-4 text-base text-blue-900",children:[S()," L"]}),e.jsx("td",{})]})})]})})]})]}):e.jsx("div",{className:"h-full flex items-center justify-center p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-24 h-24 bg-white rounded-full flex items-center justify-center mx-auto mb-4 shadow-sm",children:e.jsx(x,{className:"w-12 h-12 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Vehicle Selected"}),e.jsx("p",{className:"text-sm text-gray-500 max-w-sm mx-auto",children:"Please select a vehicle from the list to view and manage its fuel consumption data"})]})})})]})]})}export{Q as default};
