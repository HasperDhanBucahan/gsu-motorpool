import{r as d,j as e,a as B,f as j}from"./app-CM_53ag-.js";import{A as U,T as I}from"./AuthenticatedLayout-D4R4wwZx.js";import{R as O}from"./RequestDetailModal-d0WLdaZz.js";import{M as f}from"./map-pin-CuCzhjHC.js";import{F as n}from"./file-text-BuT2rTD0.js";import{P as V}from"./pen-line-B_s0TFiC.js";import{U as z,a as Y,C as G}from"./users-DYKfnPp_.js";import{C as H}from"./car-Cbx68Keb.js";import{U as J}from"./user-Bqgk2e5v.js";import{E as K}from"./eye-CaPjzHpH.js";import{C as Q}from"./circle-check-big-CyQMP5RP.js";import{f as y}from"./format-zWY_uF1i.js";import"./Dropdown-NYFviwhB.js";import"./transition-CF6lRaLe.js";import"./portal-N1CzU3lS.js";import"./createLucideIcon-mPmu35-0.js";import"./x-C1RpThLZ.js";import"./circle-x-C_tTjCxK.js";import"./circle-alert-x6lWoPzX.js";function ue({auth:N,pendingRequests:i,assignedRequests:c,approvedRequests:m,completedRequests:x,declinedRequests:g}){const[t,v]=d.useState("pending"),[l,w]=d.useState(""),[C,p]=d.useState(null),[D,h]=d.useState(!1),M=[{id:"pending",label:"Pending",count:i.length,color:"yellow"},{id:"assigned",label:"Assigned",count:c.length,color:"blue"},{id:"approved",label:"Approved",count:m.length,color:"green"},{id:"completed",label:"Completed",count:x.length,color:"purple"},{id:"declined",label:"Declined",count:g.length,color:"red"}],u=(()=>{switch(t){case"pending":return i;case"assigned":return c;case"approved":return m;case"completed":return x;case"declined":return g;default:return[]}})(),S=s=>{p(s),h(!0)},_=()=>{h(!1),p(null)},a=u.filter(s=>s.destination.toLowerCase().includes(l.toLowerCase())||s.purpose.toLowerCase().includes(l.toLowerCase())),b=s=>y(new Date(s),"MMM d, yyyy"),$=s=>y(new Date(`2000-01-01 ${s}`),"h:mm a"),T=s=>{confirm("Are you sure you want to delete this request?")&&j.delete(route("client.requests.destroy",s))},A=s=>{const r={pending:{bg:"bg-yellow-100",text:"text-yellow-800",label:"Pending"},assigned:{bg:"bg-blue-100",text:"text-blue-800",label:"Assigned"},approved:{bg:"bg-green-100",text:"text-green-800",label:"Approved"},completed:{bg:"bg-purple-100",text:"text-purple-800",label:"Completed"},declined:{bg:"bg-red-100",text:"text-red-800",label:"Declined"}},o=r[s]||r.pending;return e.jsx("span",{className:`px-2.5 py-0.5 text-xs font-medium rounded-full ${o.bg} ${o.text}`,children:o.label})},R=s=>({blue:"border-blue-500 text-blue-600",yellow:"border-yellow-500 text-yellow-600",green:"border-green-500 text-green-600",purple:"border-purple-500 text-purple-600",red:"border-red-500 text-red-600"})[s]||"border-gray-500 text-gray-600",P=()=>({approved:"border-green-200",completed:"border-purple-200",declined:"border-red-200",assigned:"border-blue-200",pending:"border-gray-200"})[t]||"border-gray-200",k=()=>({approved:"bg-gradient-to-r from-green-400 to-green-500",completed:"bg-gradient-to-r from-purple-400 to-purple-500",declined:"bg-gradient-to-r from-red-400 to-red-500",assigned:"bg-gradient-to-r from-blue-400 to-blue-500",pending:"bg-gradient-to-r from-yellow-400 to-yellow-500"})[t]||"bg-gradient-to-r from-yellow-400 to-yellow-500",L=()=>({approved:"bg-green-50",completed:"bg-purple-50",declined:"bg-red-50",assigned:"bg-blue-50",pending:"bg-yellow-50"})[t]||"bg-yellow-50",E=()=>({approved:"text-green-600",completed:"text-purple-600",declined:"text-red-600",assigned:"text-blue-600",pending:"text-yellow-600"})[t]||"text-yellow-600",F=({request:s,showActions:r=!1})=>e.jsxs("div",{className:`bg-white rounded-xl border shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden ${P()}`,children:[e.jsx("div",{className:`h-1 ${k()}`}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${L()}`,children:e.jsx(f,{className:`w-6 h-6 ${E()}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-xl text-gray-900",children:s.destination}),e.jsx("p",{className:"text-gray-600 mt-1",children:s.purpose})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[A(s.status),r&&e.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[e.jsx("button",{onClick:()=>j.visit(route("client.requests.edit",s.id)),className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit request",children:e.jsx(V,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>T(s.id),className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete request",children:e.jsx(I,{className:"w-4 h-4"})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-purple-50 rounded-lg flex items-center justify-center",children:e.jsx(z,{className:"w-4 h-4 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Passengers"}),e.jsx("p",{className:"font-medium text-gray-900 text-sm",children:s.authorized_passengers})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-50 rounded-lg flex items-center justify-center",children:e.jsx(Y,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Date"}),e.jsx("p",{className:"font-medium text-gray-900",children:b(s.date_of_travel)})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-orange-50 rounded-lg flex items-center justify-center",children:e.jsx(G,{className:"w-4 h-4 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Time & Duration"}),e.jsxs("p",{className:"font-medium text-gray-900",children:[$(s.time_of_travel),e.jsxs("span",{className:"text-gray-500 text-sm ml-1",children:["(",s.days_of_travel,"d)"]})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-50 rounded-lg flex items-center justify-center",children:e.jsx(n,{className:"w-4 h-4 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Submitted"}),e.jsx("p",{className:"font-medium text-gray-900",children:b(s.created_at)})]})]})]}),(t==="assigned"||t==="approved"||t==="completed")&&e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 mt-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3 text-sm",children:"Assignment Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-indigo-50 rounded-lg flex items-center justify-center",children:e.jsx(H,{className:"w-4 h-4 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Vehicle"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.vehicle?`${s.vehicle.description} (${s.vehicle.plate_number})`:e.jsx("span",{className:"text-gray-400",children:"Not assigned"})})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-amber-50 rounded-lg flex items-center justify-center",children:e.jsx(J,{className:"w-4 h-4 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Driver"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.driver?s.driver.name:e.jsx("span",{className:"text-gray-400",children:"Not assigned"})})]})]})]})]}),e.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[e.jsxs("button",{onClick:()=>S(s),className:"px-3 py-1 bg-gray-600 hover:bg-gray-700 text-white text-sm font-medium rounded-md transition-colors flex items-center gap-1",children:[e.jsx(K,{className:"w-4 h-4"}),"View Details"]}),(t==="approved"||t==="completed"||t==="declined")&&e.jsxs(e.Fragment,{children:[e.jsxs("a",{href:route("client.requests.pdf.preview",s.id),target:"_blank",className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-md transition-colors flex items-center gap-1",children:[e.jsx(n,{className:"w-4 h-4"}),"View PDF"]}),e.jsxs("a",{href:route("client.requests.pdf",s.id),className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-sm font-medium rounded-md transition-colors flex items-center gap-1",children:[e.jsx(n,{className:"w-4 h-4"}),"Download PDF"]})]})]}),t==="declined"&&s.decline_reason&&e.jsxs("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-red-900 mb-1",children:"Decline Reason:"}),e.jsx("p",{className:"text-sm text-red-800",children:s.decline_reason})]}),t==="completed"&&e.jsxs("div",{className:"mt-4 flex items-center gap-2 p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[e.jsx(Q,{className:"w-5 h-5 text-purple-600"}),e.jsx("p",{className:"text-sm font-medium text-purple-900",children:"This trip has been completed"})]})]})]});return e.jsxs(U,{user:N.user,header:e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{children:e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"My Requests"})})}),children:[e.jsx(B,{title:"My Requests"}),e.jsx("div",{className:"py-0",children:e.jsx("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:e.jsxs("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:[e.jsx("div",{className:"border-b border-gray-200 overflow-x-auto",children:e.jsx("nav",{className:"-mb-px flex",children:M.map(s=>e.jsxs("button",{onClick:()=>v(s.id),className:`py-4 px-6 text-sm font-medium whitespace-nowrap ${t===s.id?`border-b-2 ${R(s.color)}`:"text-gray-500 hover:text-gray-700"}`,children:[s.label," (",s.count,")"]},s.id))})}),e.jsx("div",{className:"p-6 bg-gray-50 border-b border-gray-200",children:e.jsxs("div",{className:"relative",children:[e.jsx(f,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),e.jsx("input",{type:"text",placeholder:"Search by destination or purpose...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:l,onChange:s=>w(s.target.value)})]})}),e.jsx("div",{className:"p-6",children:a.length===0?e.jsxs("div",{className:"text-center py-16 bg-gray-50 rounded-2xl border-2 border-dashed border-gray-200",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(n,{className:"w-8 h-8 text-gray-400"})}),e.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:["No ",t," requests"]}),e.jsx("p",{className:"text-gray-500",children:l?"No requests match your search criteria.":`You don't have any ${t} requests.`})]}):e.jsx("div",{className:"space-y-4",children:a.map(s=>e.jsx(F,{request:s,showActions:t==="pending"},s.id))})}),a.length>0&&e.jsx("div",{className:"p-6 bg-gray-50 border-t border-gray-200",children:e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",a.length," of ",u.length," ",t," requests"]})})]})})}),e.jsx(O,{isOpen:D,onClose:_,request:C})]})}export{ue as default};
