import{r as c,S as P,j as e,a as z,f as O}from"./app-CM_53ag-.js";import{A as U,T as w}from"./AuthenticatedLayout-D4R4wwZx.js";import{C as o}from"./car-Cbx68Keb.js";import{C}from"./circle-check-big-CyQMP5RP.js";import{c as B}from"./createLucideIcon-mPmu35-0.js";import{F as q}from"./funnel-BE2sA641.js";import{S as G}from"./square-pen-4g39sSM7.js";import{P as _}from"./plus-D_n6UFi2.js";import{X as R}from"./x-C1RpThLZ.js";import{C as W}from"./circle-alert-x6lWoPzX.js";import"./Dropdown-NYFviwhB.js";import"./transition-CF6lRaLe.js";import"./portal-N1CzU3lS.js";/**
 * @license lucide-react v0.503.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],S=B("wrench",X);function ce({auth:k,vehicles:r=[]}){const[A,u]=c.useState(!1),[t,h]=c.useState(null),[b,g]=c.useState(null),[n,j]=c.useState("all"),[Y,H]=c.useState(null),{data:a,setData:d,post:V,put:D,reset:p,errors:l,processing:f}=P({model:"",plate_number:"",fuel_type:"",description:"",status:"available"}),E=["Diesel"],m=[{value:"available",label:"Available",color:"green"},{value:"in_use",label:"In Use",color:"blue"},{value:"maintenance",label:"Maintenance",color:"yellow"}];c.useEffect(()=>{t?d({model:t.model,plate_number:t.plate_number,fuel_type:t.fuel_type,description:t.description||"",status:t.status}):p()},[t]);const M=s=>{s.preventDefault(),t?D(`/assignment/vehicles/${t.id}`,{onSuccess:()=>{x()}}):V("/assignment/vehicles",{onSuccess:()=>{x()}})},$=s=>{h(s),u(!0)},T=s=>{O.delete(`/assignment/vehicles/${s}`,{onSuccess:()=>{g(null)}})},N=()=>{h(null),p(),u(!0)},x=()=>{u(!1),h(null),p()},F=s=>{const i=m.find(L=>L.value===s);return{green:"bg-green-100 text-green-700",blue:"bg-blue-100 text-blue-700",yellow:"bg-yellow-100 text-yellow-700"}[i==null?void 0:i.color]||"bg-gray-100 text-gray-700"},I=s=>{switch(s){case"available":return e.jsx(C,{className:"w-4 h-4"});case"in_use":return e.jsx(o,{className:"w-4 h-4"});case"maintenance":return e.jsx(S,{className:"w-4 h-4"});default:return e.jsx(W,{className:"w-4 h-4"})}},y=n==="all"?r:r.filter(s=>s.status===n);return e.jsxs(U,{user:k.user,header:e.jsxs("div",{className:"flex justify-between items-center space-x-4",children:[e.jsx("h2",{className:"font-semibold text-xl text-gray-800 leading-tight",children:"Vehicle Management"}),e.jsxs("button",{onClick:N,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(_,{className:"w-5 h-5"}),"Add New Vehicle"]})]}),children:[e.jsx(z,{title:"Vehicle Management"}),e.jsx("div",{className:"py-2",children:e.jsxs("div",{className:"max-w-7xl mx-auto sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:e.jsx(o,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Vehicles"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:r.length})]})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:e.jsx(C,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Available"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:r.filter(s=>s.status==="available").length})]})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:e.jsx(o,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"In Use"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:r.filter(s=>s.status==="in_use").length})]})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-yellow-100 p-3 rounded-full",children:e.jsx(S,{className:"w-6 h-6 text-yellow-600"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Maintenance"}),e.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:r.filter(s=>s.status==="maintenance").length})]})]})})})]}),e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(q,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filter by status:"}),e.jsxs("button",{onClick:()=>j("all"),className:`px-3 py-1 rounded-lg text-sm transition-colors ${n==="all"?"bg-gray-900 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["All (",r.length,")"]}),m.map(s=>e.jsxs("button",{onClick:()=>j(s.value),className:`px-3 py-1 rounded-lg text-sm transition-colors ${n===s.value?"bg-gray-900 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[s.label," (",r.filter(i=>i.status===s.value).length,")"]},s.value))]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:y.map(s=>{var i;return e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:e.jsx(o,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>$(s),className:"px-3 py-2 bg-blue-50 text-blue-700 hover:bg-blue-100 rounded-lg transition-colors flex items-center gap-2",title:"Edit vehicle",children:e.jsx(G,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>g(s.id),className:"px-3 py-2 bg-red-50 text-red-700 hover:bg-red-100 rounded-lg transition-colors flex items-center gap-2",title:"Delete vehicle",children:e.jsx(w,{className:"w-4 h-4"})})]})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Plate No.:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:s.plate_number})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Year Model:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:s.model})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Fuel Type:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:s.fuel_type})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Status:"}),e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${F(s.status)}`,children:[I(s.status),(i=m.find(v=>v.value===s.status))==null?void 0:i.label]})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsx("div",{className:"flex items-center justify-between text-xs text-gray-500",children:e.jsxs("span",{children:["Last updated: ",s.updated_at?new Date(s.updated_at).toLocaleDateString():"N/A"]})})})]})},s.id)})}),y.length===0&&e.jsx("div",{className:"bg-white overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-12 text-center",children:[e.jsx(o,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:n==="all"?"No vehicles found":`No ${n.replace("_"," ")} vehicles`}),e.jsx("p",{className:"text-gray-500 mb-4",children:n==="all"?"Get started by adding your first vehicle":"Try changing the filter or add a new vehicle"}),n==="all"&&e.jsxs("button",{onClick:N,className:"inline-flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(_,{className:"w-5 h-5"}),"Add First Vehicle"]})]})}),A&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 sticky top-0 bg-white",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:t?"Edit Vehicle":"Add New Vehicle"}),e.jsx("button",{onClick:x,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(R,{className:"w-5 h-5 text-gray-500"})})]})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Model ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:a.model,onChange:s=>d("model",s.target.value),className:`w-full px-3 py-2 border ${l.model?"border-red-300":"border-gray-300"} rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500`,placeholder:"Enter vehicle model"}),l.model&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.model})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Plate Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:a.plate_number,onChange:s=>d("plate_number",s.target.value),className:`w-full px-3 py-2 border ${l.plate_number?"border-red-300":"border-gray-300"} rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500`,placeholder:"Enter plate number"}),l.plate_number&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.plate_number})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Fuel Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:a.fuel_type,onChange:s=>d("fuel_type",s.target.value),className:`w-full px-3 py-2 border ${l.fuel_type?"border-red-300":"border-gray-300"} rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500`,children:[e.jsx("option",{value:"",children:"Select type"}),E.map(s=>e.jsx("option",{value:s,children:s},s))]}),l.fuel_type&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.type})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Description ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{value:a.description,onChange:s=>d("description",s.target.value),className:`w-full px-3 py-2 border ${l.description?"border-red-300":"border-gray-300"} rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none`,placeholder:"Enter vehicle description (optional)",rows:"4",maxLength:"1000"}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsx("div",{children:l.description&&e.jsx("p",{className:"text-sm text-red-600",children:l.description})}),e.jsxs("p",{className:"text-xs text-gray-500",children:[a.description.length,"/1000 characters"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),e.jsx("select",{value:a.status,onChange:s=>d("status",s.target.value),className:`w-full px-3 py-2 border ${l.status?"border-red-300":"border-gray-300"} rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500`,children:m.map(s=>e.jsx("option",{value:s.value,children:s.label},s.value))}),l.status&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.status})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{type:"button",onClick:x,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:M,disabled:f||!a.model||!a.plate_number||!a.fuel_type,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[f?"Saving...":t?"Update":"Add"," Vehicle"]})]})]})]})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:e.jsx(w,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Delete Vehicle"}),e.jsx("p",{className:"text-sm text-gray-500",children:"This action cannot be undone"})]})]}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this vehicle? All associated data will be permanently removed."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>g(null),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>T(b),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete Vehicle"})]})]})})]})})]})}export{ce as default};
