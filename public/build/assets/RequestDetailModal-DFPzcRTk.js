import{j as e}from"./app-CM_53ag-.js";import{F as x}from"./file-text-BuT2rTD0.js";import{X as $}from"./x-C1RpThLZ.js";import{M as A}from"./map-pin-CuCzhjHC.js";import{U as T,a as g,C as R}from"./users-DYKfnPp_.js";import{U as p}from"./user-Bqgk2e5v.js";import{C as f}from"./car-Cbx68Keb.js";import{C as j}from"./circle-x-C_tTjCxK.js";import{C as u}from"./circle-alert-x6lWoPzX.js";import{C as N}from"./circle-check-big-CyQMP5RP.js";import"./createLucideIcon-mPmu35-0.js";function X({isOpen:b,closeModal:n,request:s,userRole:y}){if(!b||!s)return null;const i=t=>{if(!t)return"N/A";const l=new Date(t);return`${["January","February","March","April","May","June","July","August","September","October","November","December"][l.getMonth()]} ${l.getDate()}, ${l.getFullYear()}`},v=t=>{if(!t)return"N/A";const[l,a]=t.split(":"),r=parseInt(l),c=r>=12?"PM":"AM";return`${r%12||12}:${a} ${c}`},d=t=>{if(!t)return"N/A";const l=new Date(t),a=l.getHours(),r=l.getMinutes(),c=a>=12?"PM":"AM",h=a%12||12,C=r<10?"0"+r:r;return`${h}:${C} ${c}`},w=()=>[{id:"pending",label:"Pending",icon:u,description:"Request submitted"},{id:"assigned",label:"Assigned",icon:f,description:"Vehicle & driver assigned"},{id:"approved",label:"Approved",icon:N,description:"Request approved"},{id:"completed",label:"Completed",icon:N,description:"Trip completed"}],_=()=>[{id:"pending",label:"Pending",icon:u,description:"Request submitted"},{id:"declined",label:"Declined",icon:j,description:"Request declined"}],m=()=>["pending","assigned","approved","completed"].indexOf(s.status),k=(t,l)=>{if(s.status==="declined")return t==="pending"?"completed":t==="declined"?"current":"upcoming";const a=m();return l<a?"completed":l===a?"current":"upcoming"},o=s.status==="declined"?_():w(),D=()=>e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute top-5 left-0 right-0 h-0.5 bg-gray-200",style:{zIndex:0},children:e.jsx("div",{className:`h-full transition-all duration-500 ${s.status==="declined"?"bg-red-500":"bg-green-500"}`,style:{width:s.status==="declined"?"50%":`${m()/(o.length-1)*100}%`}})}),e.jsx("div",{className:"relative flex justify-between",style:{zIndex:1},children:o.map((t,l)=>{const a=k(t.id,l),r=t.icon;return e.jsxs("div",{className:"flex flex-col items-center",style:{flex:1},children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-2 transition-all ${a==="completed"?s.status==="declined"?"bg-red-500 border-red-500":"bg-green-500 border-green-500":a==="current"?s.status==="declined"?"bg-red-500 border-red-500 ring-4 ring-red-100":s.status==="completed"?"bg-purple-500 border-purple-500 ring-4 ring-purple-100":"bg-blue-500 border-blue-500 ring-4 ring-blue-100":"bg-white border-gray-300"}`,children:e.jsx(r,{className:`w-5 h-5 ${a==="completed"||a==="current"?"text-white":"text-gray-400"}`})}),e.jsxs("div",{className:"mt-2 text-center",children:[e.jsx("p",{className:`text-sm font-medium ${a==="completed"||a==="current"?"text-gray-900":"text-gray-400"}`,children:t.label}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t.description})]})]},t.id)})})]});return e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",onClick:n,children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75"}),e.jsxs("div",{className:"inline-block w-full max-w-4xl my-8 overflow-hidden text-left align-middle transition-all transform bg-white rounded-lg shadow-xl",onClick:t=>t.stopPropagation(),children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-white bg-opacity-20 rounded-lg flex items-center justify-center",children:e.jsx(x,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Request Details"}),e.jsxs("p",{className:"text-sm text-blue-100",children:["Request ID: #",s.id]})]})]}),e.jsx("button",{onClick:n,className:"text-white hover:bg-white hover:bg-opacity-20 rounded-lg p-2 transition-colors",children:e.jsx($,{className:"w-6 h-6"})})]})}),e.jsxs("div",{className:"px-6 py-6 max-h-[calc(100vh-200px)] overflow-y-auto",children:[e.jsxs("div",{className:"mb-8 bg-gray-50 rounded-xl p-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Request Progress"}),e.jsx(D,{})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Trip Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(A,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Destination"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.destination})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-50 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(x,{className:"w-5 h-5 text-purple-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Purpose"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.purpose})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-50 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(T,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Authorized Passengers"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.authorized_passengers})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-orange-50 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(g,{className:"w-5 h-5 text-orange-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Date of Travel"}),e.jsx("p",{className:"font-medium text-gray-900",children:i(s.date_of_travel)})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-amber-50 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(R,{className:"w-5 h-5 text-amber-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Time of Travel"}),e.jsx("p",{className:"font-medium text-gray-900",children:v(s.time_of_travel)})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(g,{className:"w-5 h-5 text-indigo-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Duration"}),e.jsxs("p",{className:"font-medium text-gray-900",children:[s.days_of_travel," ",s.days_of_travel===1?"Day":"Days"]})]})]})]})]})]}),y!=="client"&&s.user&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Requester Information"}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-50 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(p,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Name"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.user.name})]})]})]}),(s.status==="assigned"||s.status==="approved"||s.status==="completed")&&e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Assignment Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(f,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Assigned Vehicle"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.vehicle?`${s.vehicle.description} (${s.vehicle.plate_number})`:"Not assigned yet"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-50 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(p,{className:"w-5 h-5 text-green-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Assigned Driver"}),e.jsx("p",{className:"font-medium text-gray-900",children:s.driver?s.driver.name:"Not assigned yet"})]})]})]})]}),s.trip_ticket_number&&e.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-yellow-900 mb-4",children:"Trip Ticket"}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(x,{className:"w-5 h-5 text-yellow-700"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-yellow-700 mb-1",children:"Ticket Number"}),e.jsxs("p",{className:"font-bold text-yellow-900 text-2xl",children:["#",s.trip_ticket_number]})]})]})]}),s.status==="declined"&&s.decline_reason&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(j,{className:"w-6 h-6 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-lg font-semibold text-red-900 mb-2",children:"Decline Reason"}),e.jsx("p",{className:"text-red-800",children:s.decline_reason})]})]})}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-xl p-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Timeline"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Submitted"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[i(s.created_at)," at ",d(s.created_at)]})]}),s.approved_at&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Approved"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[i(s.approved_at)," at ",d(s.approved_at)]})]}),s.declined_at&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Declined"}),e.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[i(s.declined_at)," at ",d(s.declined_at)]})]})]})]})]})]}),e.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:e.jsx("div",{className:"flex justify-end space-x-3",children:e.jsx("button",{onClick:n,className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg font-medium transition-colors",children:"Close"})})})]})]})})}export{X as default};
